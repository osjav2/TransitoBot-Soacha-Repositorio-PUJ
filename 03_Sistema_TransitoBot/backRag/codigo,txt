from dotenv import load_dotenv
import os
load_dotenv('.env', override=True)

OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')
import openai

client = openai.OpenAI(
    base_url="https://openrouter.ai/api/v1",
    api_key="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"
)

def chat_with_context(query, context):
    response = client.chat.completions.create(
        model="meta-llama/llama-3.3-70b-instruct:free",
        messages=[
            {"role": "system", "content": f"Contexto: {context}"},
            {"role": "user", "content": query}
        ]
    )
    return response.choices[0].message.content
